
<div class="min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8">

    <!-- <div class="max-w-4xl mx-auto mb-6 p-6 bg-indigo-50 rounded-xl border border-indigo-200 shadow-sm">
        <label for="buscar-dron" class="block text-sm font-bold text-indigo-900 mb-2">
            ¿Desea actualizar un dron existente? Seleccione el modelo:
        </label>
        <select 
            id="buscar-dron" 
            (change)="cargarDronParaEditar($event)" 
            class="block w-full rounded-md border-0 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-indigo-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm">
            <option value="">-- Seleccionar equipo para modificar --</option>
            @for (item of listaDrones; track item.id) {
                <option [value]="item.id">{{ item.modelo }} - S/N: {{ item.serie }}</option>
            }
        </select>
        <p class="mt-2 text-xs text-indigo-600 italic">Al seleccionar un modelo, los campos del formulario se llenarán automáticamente.</p>
    </div> -->

    @if (soloActualizar) {
        <div class="max-w-4xl mx-auto mb-6 p-6 bg-indigo-50 rounded-xl border border-indigo-200">
            <label class="block text-sm font-bold text-indigo-900 mb-2">Seleccione el dron a modificar:</label>
            <select (change)="cargarDronParaEditar($event)" 
                class="block w-full rounded-md border-indigo-300">
                <option value="">-- Seleccionar equipo --</option>
                @for (item of listaDrones; track item.id) {
                    <option [value]="item.id">{{ item.modelo }} - {{ item.serie }}</option>
                }
            </select>
        </div>
    }

    <form (ngSubmit)="guardarDron()">
        <div class="max-w-4xl mx-auto bg-white p-8 shadow-sm rounded-xl border border-gray-200">
            
            <div class="border-b border-gray-900/10 pb-12">
                <h2 class="text-base/7 font-semibold text-gray-900">
                    {{ modoEdicion ? 'Actualizar Aeronave: ' + nuevoDron.modelo : 'Registro de Nueva Aeronave' }}
                </h2>
                <p class="mt-1 text-sm/6 text-gray-600">
                    {{ modoEdicion ? 'Modifique los campos necesarios y guarde los cambios.' : 'Ingrese la información técnica para el nuevo equipo.' }}
                </p>

                <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
                    <div class="sm:col-span-3">
                        <label for="modelo" class="block text-sm/6 font-medium text-gray-900">Modelo</label>
                        <div class="mt-2">
                            <input [(ngModel)]="nuevoDron.modelo" type="text" name="modelo" id="modelo"
                                class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 outline-gray-300 focus:outline-indigo-600 sm:text-sm/6" />
                        </div>
                    </div>

                    <div class="sm:col-span-3">
                        <label for="serial-number" class="block text-sm/6 font-medium text-gray-900">Número de Serie (S/N)</label>
                        <div class="mt-2">
                            <input [(ngModel)]="nuevoDron.serie" type="text" name="serie" id="serie" placeholder="1045XXXXXXXXX"
                                class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:outline-indigo-600 sm:text-sm/6" />
                        </div>
                    </div>

                    <div class="sm:col-span-3">
                        <label for="drone-type" class="block text-sm/6 font-medium text-gray-900">Tipo de Aeronave</label>
                        <div class="mt-2 grid grid-cols-1">
                            <select [(ngModel)]="nuevoDron.tipo"
                                id="tipo" name="tipo" class="col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:outline-indigo-600 sm:text-sm/6">
                                <option value="" disabled selected>Seleccione un tipo</option>
                                <option value="Multirrotor">Multirrotor</option>
                                <option value="Ala Fija">Ala Fija</option>
                                <option value="VTOL">VTOL</option>
                                <option value="Híbrido">Híbrido</option>
                                <option value="NA" disabled selected>N/A</option>
                            </select>
                            <svg viewBox="0 0 16 16" fill="currentColor" class="pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4">
                                <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" />
                            </svg>
                        </div>
                    </div>

                </div>
            </div>

            <div class="border-b border-gray-900/10 py-12">
                <h2 class="text-base/7 font-semibold text-gray-900">Registro de Baterias</h2>
                <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
                    
                    <div class="sm:col-span-2">
                        <label for="weight" class="block text-sm/6 font-medium text-gray-900">Bateria 1</label>
                        <div class="mt-2">
                            <input [(ngModel)]="nuevoDron.b1" type="text" name="b1" id="weight" placeholder="Ej: B01"
                                class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:outline-indigo-600 sm:text-sm/6" />
                        </div>
                    </div>

                    <div class="sm:col-span-2">
                        <label for="max-flight-time" class="block text-sm/6 font-medium text-gray-900">Bateria 2</label>
                        <div class="mt-2">
                            <input [(ngModel)]="nuevoDron.b2" type="text" name="b2" id="max-flight-time" placeholder="Ej: B02"
                                class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:outline-indigo-600 sm:text-sm/6" />
                        </div>
                    </div>

                    <div class="sm:col-span-2">
                        <label for="max-flight-time" class="block text-sm/6 font-medium text-gray-900">Bateria 3</label>
                        <div class="mt-2">
                            <input [(ngModel)]="nuevoDron.b3" type="text" name="b3" id="max-flight-time" placeholder="Ej: B03"
                                class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:outline-indigo-600 sm:text-sm/6" />
                        </div>
                    </div>

                </div>
            </div>

            <div class="border-b border-gray-900/10 py-12">
                <h2 class="text-base/7 font-semibold text-gray-900">Especificaciones de Rendimiento</h2>
                <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
                    
                    <div class="sm:col-span-2">
                        <label for="weight" class="block text-sm/6 font-medium text-gray-900">Peso (kg)</label>
                        <div class="mt-2">
                            <input [(ngModel)]="nuevoDron.peso" type="number" step="0.01" name="peso" id="weight" placeholder="0.00"
                                class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:outline-indigo-600 sm:text-sm/6" />
                        </div>
                    </div>

                    <div class="sm:col-span-2">
                        <label for="max-flight-time" class="block text-sm/6 font-medium text-gray-900">Autonomía Máx. (min)</label>
                        <div class="mt-2">
                            <input [(ngModel)]="nuevoDron.automina" type="number" name="autonomia" id="max-flight-time" placeholder="Ej: 55"
                                class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:outline-indigo-600 sm:text-sm/6" />
                        </div>
                    </div>

                </div>
            </div>

            <div class="pt-12">
                <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">

                    <div class="col-span-full">
                        <label for="observaciones" class="block text-sm/6 font-medium text-gray-900">Observaciones
                            (Accesorios Adicionales)</label>
                        <div class="mt-2">
                            <textarea [(ngModel)]="nuevoDron.observaciones" id="observaciones" name="observaciones" rows="3"
                                class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:outline-indigo-600 sm:text-sm/6"></textarea>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="mt-6 flex items-center justify-end gap-x-6">
                <button type="button" (click)="limpiar()" class="text-sm/6 font-semibold text-gray-900">
                    {{ modoEdicion ? 'Cancelar Edición' : 'Limpiar' }}
                </button>
                <button type="submit" 
                    class="rounded-md bg-indigo-600 px-6 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500">
                    {{ modoEdicion ? 'Actualizar Cambios en Base de Datos' : 'Guardar Nueva Aeronave' }}
                </button>
            </div>
    </form>
</div>